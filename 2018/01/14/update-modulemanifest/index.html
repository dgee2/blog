<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Update-ModuleManifest and PowerShell 5.0 | gee.rocks</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="alternate" type="application/rss+xml" href="https://dgee2.github.io/rss.xml" title="gee.rocks RSS Feed">
    <meta name="description" content="I have been doing some work with PowerShell modules recently and have come across a bug in Update-ModuleManifest. I have noticed that for some of my PowerShell modules, PowerShell Gallery was showing ...">
    
    <link rel="preload" href="/assets/css/0.styles.a3dc0ca0.css" as="style"><link rel="preload" href="/assets/js/app.d450a5b4.js" as="script"><link rel="preload" href="/assets/js/6.90997492.js" as="script"><link rel="preload" href="/assets/js/3.dd19f36c.js" as="script"><link rel="preload" href="/assets/js/16.c92f2063.js" as="script"><link rel="prefetch" href="/assets/js/10.833c9584.js"><link rel="prefetch" href="/assets/js/11.45b74547.js"><link rel="prefetch" href="/assets/js/12.5697e02d.js"><link rel="prefetch" href="/assets/js/13.08f33fd6.js"><link rel="prefetch" href="/assets/js/14.cbaed45a.js"><link rel="prefetch" href="/assets/js/15.a7cb82a5.js"><link rel="prefetch" href="/assets/js/4.e4184a69.js"><link rel="prefetch" href="/assets/js/5.1dc6b3d4.js"><link rel="prefetch" href="/assets/js/7.111e71d5.js"><link rel="prefetch" href="/assets/js/8.0bd40106.js"><link rel="prefetch" href="/assets/js/9.310de853.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.034f4881.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a3dc0ca0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">gee.rocks </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <a href="/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">gee.rocks </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li> <li class="mobile-nav-item"><a href="/rss.xml" class="feed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        Update-ModuleManifest and PowerShell 5.0
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">Daniel Gee</span> <!----></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2018-01-14T00:00:00.000Z">
      Sun Jan 14 2018
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/tag/PowerShell" data-v-42ccfcd5><span data-v-42ccfcd5>PowerShell</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/tag/Modules" data-v-42ccfcd5><span data-v-42ccfcd5>Modules</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/tag/PowerShell Gallery" data-v-42ccfcd5><span data-v-42ccfcd5>PowerShell Gallery</span></a></li><li class="post-tag" data-v-42ccfcd5><a href="/tag/VSTS" data-v-42ccfcd5><span data-v-42ccfcd5>VSTS</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><p>I have been doing some work with PowerShell modules recently and have come across a bug in Update-ModuleManifest. I have noticed that for some of my PowerShell modules, PowerShell Gallery was showing the exported functions concatenated together.</p> <p>Through a lot of hair pulling I found that the Update-ModuleManifest function that I had been using to update the version of the package at build time to add the build number in had also been corrupting some of the other data in the file and effectively collapsing my ExportedFunctions key to a single string. PowerShell Gallery was correctly showing the exported functions as a single string...</p> <p>This seems to stem from a bug in PowerShell 5.0 and so the solution was to update to PowerShell 5.1. In my case this caused other annoying (but solvable) errors as I had to upgrade my build pipeline to using the VS2017 hosted queues on VSTS. They didn't play well with the tool I was using to run Pester. (You can read more about that <a href="https://github.com/rfennell/vNextBuild/issues/243" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</p></div> <footer><!----> <hr> <!----></footer></article> <!----></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/dgee2" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li><li class="contact-item" data-v-3d9deeb8><a href="https://twitter.com/DanielGee" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter" data-v-3d9deeb8><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z" data-v-3d9deeb8></path></svg>
          
        </a></li><li class="contact-item" data-v-3d9deeb8><a href="https://www.linkedin.com/in/daniel-gee-32816a23" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-linkedin" data-v-3d9deeb8><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z" data-v-3d9deeb8></path><rect x="2" y="9" width="4" height="12" data-v-3d9deeb8></rect><circle cx="4" cy="4" r="2" data-v-3d9deeb8></circle></svg>
          
        </a></li><li class="contact-item" data-v-3d9deeb8><a href="https://www.facebook.com/dgee2" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-facebook" data-v-3d9deeb8><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8><li class="copyright-item" data-v-3d9deeb8>Daniel Gee © 2022</li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d450a5b4.js" defer></script><script src="/assets/js/6.90997492.js" defer></script><script src="/assets/js/3.dd19f36c.js" defer></script><script src="/assets/js/16.c92f2063.js" defer></script>
  </body>
</html>
